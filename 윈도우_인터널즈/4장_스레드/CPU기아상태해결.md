# 윈도우의 CPU 기아 상태 해결법
## CPU 기아 상태란?
CPU 기아 상태(Starvation)
* 우선순위가 낮은 스레드가 다른 우선순위가 높은 스레드에 의해 영원히 CPU 자원을 할당 받지 못하는 상태

우선순위 전도(Priority inversion)
* 우선순위 11인 스레드가 우선순위 4의 스레드에 의한 잠금을 대기
* 그런데 우선순위 4의 스레드는 다른 높은 우선순위 스레드에 의해 잠금을 해제하지 못하는 상황

## 밸런스 셋 매니저 시스템 스레드
* 윈도우는 밸런스 셋 매니저라는 시스템 스레드의 일부 기능으로 기아 상태를 해결함

### 밸런스 셋 매니저의 동작
* 1초에 한번씩 레디 큐를 스캔하여 레디 상태에서 4초 이상 머물고 있는 스레드가 있는지 찾음
* 만약 있다면 그 스레드의 우선순위를 15로 올리고 퀀텀 타겟을 3 퀀텀 단위의 CPU 클록 사이클 개수만큼 설정
* 퀀텀이 만료되면 그 스레드는 본래의 우선순위로 돌아감
* 한번에 오직 16개의 스레드만 검사
* 한번에 10개의 스레드까지만 우선순위 상승