# 21장 Dynamic Linking Library
## Section 01 - 라이브러리와 printf
질문
* printf의 바이너리는 도대체 어디있는걸까?

stdio.h? -> 여기에는 선언만 있다.

### 해답은 라이브러리
* 호출 가능한 printf 함수는 라이브러리(Library) 안에 있다.
* printf 함수의 정의가 컴파일된 바이너리 코드는 라이브러리에 존재한다.


## Section 02 - 동적 연결 라이브러리(DLL)
### DLL(Dynamic Linking Library)에 대한 이해
* 링커가 링크과정을 통해 실행파일을 생성한다.
* 확장자로 .dll 파일을 만들어내면 그것이 바로 DLL

### DLL과 정적 라이브러리의 차이점
정적 라이브러리는 정적 링크를 통해 실행 파일에 라이브러리 코드를 완전 포함한다.

동적 라이브러리는 실행 파일과 분리되어 있다.

DLL의 특성
* 정적 라이브러리는 실행파일의 일부로 빌드되었기 때문에 정적 라이브러리를 포함하여 가상 메모리를 구성한다.
* DLL을 사용하고자 하는 프로세스는 자신의 가상 메모리 주소에 DLL을 매핑시켜야 한다.
* 즉, 두 개의 파일이 하나의 가상 메모리를 구성하는 꼴이 된다.

하나의 프로세스를 실행 시킨 경우 차이점을 느끼지 못할 수도 있다.

그런데 두개 이상의 동일한 DLL을 참조하는 프로세스를 실행시키면
* DLL은 메모리를 페이지 단위로 공유가 이뤄진다.

### 명시적 연결
Windows 함수를 이용한 명시적 연결

장점
1. 필요한 시점에 로드하고 불필요할 때 반환 가능 : 메모리가 절약된다.
2. 프로그램 실행 중 DLL 교체/선택이 가능하다.
3. 암묵적 연결 방식은 프로그램 실행 전 모든 DLL을 로딩한다. - 실행이 느리다.

그럼에도 암묵적 연결을 더 선호하는 이유는 코드의 간결성과 사용이 쉽기 때문이다.


### 한번 이상 로드될 수 있는 DLL
A.dll B.dll
* 두개가 있고 A 프로세스가 B를 먼저로드하고, B프로세스가 A와 B를 로드할 때
* A가 이미 가상 메모리 주소에 B를 매핑해뒀는데
* B에서 A가 이미 B주소를 사용하고 있다면 DLL이 두 번 로드될 수 있다.

## 이것만은 알고 갑시다.
1. 정적 라이브러리와 DLL

2. 정적 라이브러리의 특성
3. DLL의 특징
4. DLL에서 헤더파일을 정의하는 방법
