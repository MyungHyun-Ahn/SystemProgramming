# 9장 스케줄링 알고리즘과 우선순위

## Section 01 - 프로세스의 스케줄링(Scheduling)
* 스케줄러가 담당하는 일 : 실행 중인 모든 프로세스들에게 골고루 CPU를 할당하는 일

### 일반 OS와 리얼타임(Real Time) OS의 차이점
RTOS와 OS의 차이점은 응답성(응답속도)에 있다.

일반 OS
* Windows와 같은 OS는 일반 사용자도 쉽게 사용할 수 있도록 디자인
* 컴퓨터 사용자에 대한 범용성 고려
* 그렇다보니 하는 일이 사용자가 시키는 것 외에도 많다.

RTOS
* 사용하는 영역이 제한적이다.
* 프로그래머가 시키는 것 외에는 하지 않는다.

정리
* RTOS는 일반 OS에 비해 속도가 빠른 것이 아니다.
* 사용하는 일이 구체적/제한적이라 단순하게 디자인되어 있다.
* 따라서 응답성이 좋을 뿐이다.

### Soft RTOS vs Hard RTOS
위에서 설명한 것을 Soft RTOS라고 한다.

전통적으로 말하는 RTOS는 Hard RTOS이다.
* 단순히 응답성만 중요시하는 것이 아닌 데드라인을 중요시 한다.

데드라인 : 정말 정해진 시간에 딱 수행되는 것. 0.1초라도 늦으면 크리티컬하다.

### 선점형 OS와 비선점형 OS
비선점형 OS
* 실행 중인 프로세스보다 우선순위가 높은 프로세스가 등장해도 실행 대상을 바로 변경하지 않는다.
* 실행 중인 프로세스가 양도, 혹은 I/O 작업으로 Block 될 때 실행 대상이 변경된다.

선점형 OS
* 실행 중인 프로세스보다 우선순위가 높은 프로세스가 등장하면 운영체제가 적극적으로 조정한다.
* 둘 이상의 프로세스를 동작시키는 멀티 프로세스 기반 OS에 적합하다.
* 오늘날 접하는 모든 OS는 선점형 OS이다.

### 우선순위 스케줄링 알고리즘
* 프로세스마다 우선순위를 부여하여 높은 프로세스를 먼저 실행시키는 방식

우선순위가 7인 프로세스와 우선순위가 2인 프로세스를 동시실행시키면?
* 프로세스는 상당 시간 I/O 작업에 시간을 보낸다.
* 우선순위가 작은 경우에도 우연히 높은 프로세스가 I/O 작업에 들어가면 조금이나마 실행된다.

기아(Starvation) 상태
* 우선순위가 낮은 프로세스가 절대 실행되지 않는 상태

### 라운드 로빈 (Round-Robin) 스케줄링 알고리즘
* 우선순위가 동일한 프로세스의 경우 누가 먼저 실행되는가?
* 여기서 누구는 실행되고 아닌 경우도 있다하면 형평성 문제가 발생
* 그래서 Windows는 라운드 로빈 스케줄링 알고리즘을 사용하고 있다.

라운드 로빈 스케줄링 알고리즘
* 같은 우선순위의 프로세스 간 형평성 유지를 위해
* 정해진 시간 간격만큼만 실행을 하고 우선순위가 동일한 다른 프로세스에게 CPU의 할당을 넘겨준다.
* 실행의 최소 단위 시간 간격을 퀀텀(Quantum 혹은 Time Slice)라 한다.
* 타임 슬라이스를 길게하면 인터렉티브한 시스템에서 문제가 될 수 있다.
* 그렇다고 너무 짧으면 컨텍스트 스위칭이 자주 발생해서 성능이 저하된다.

### 스케줄링 알고리즘에 의해서 스케줄링이 진행되는 시점
세 가지 관점에서 생각
1. 라운드 로빈 방식의 관점
   * 정해진 시간이 지나면 다음 프로세스에게 실행순서를 넘겨야 함
   * 실행순서를 넘기기 위해서는 스케줄러가 동작, 언제 동작하지?
   * 프로세스의 실행시간 간격에 해당하는 매 타임 슬라이스마다. 스케줄러는 동작

2. 우선순위 방식의 관점
   * 우선순위가 높은 프로세스는 무조건 실행되어야 한다.
   * 새로운 프로세스가 생길 때마다 우선순위를 비교해야 한다.
   * 즉, 새로운 프로세스가 생길 때마다 스케줄러가 동작한다.

3. 블로킹 상황
   * 블로킹 상황이 발생하면 다음 실행될 프로그램을 결정하기 위해 스케줄러가 동작


### Priority Inversion
* 프로세스 우선순위가 뒤바뀌는 현상
* 어떤 프로세스가 우선순위가 낮은 다른 프로세스에게 우선순위를 위임할 때 발생

## Section 02 - 프로세스 우선순위
Windows 프로세스 6계층
1. IDLE_PRIORITY_CLASS : 기준 우선순위 4
2. BELOW_NORMAL_PRIORITY_CLASS : 사이 XP 이상 지원
3. NORMAL_PRIORITY_CLASS : 기준 우선순위 9
4. ABOVE_NORMAL_PRIORITY_CLASS : 사이 XP 이상 지원
5. HIGH_PRIORITY_CLASS : 기준 우선순위 13
6. REALRIME_PRIORITY_CLASS : 기준 우선순위 24


## 이것만은 알고 갑시다
1. 응답성 관점에서 RTOS와 일반 OS의 구분

2. 선점형 OS와 비선점형 OS의 특징
3. 스케줄러가 동작하는 세 가지 시기